// Generated by CoffeeScript 1.9.1
var Service;

Service = function(http, Q) {
  var result;
  result = {};
  result.get_all_user_data = function(username) {
    return http({
      method: 'GET',
      url: '/api/user/' + username
    });
  };
  result.get_all_users_by_genre = function(type, genre) {
    var url;
    url = '/api/';
    if (type === 1) {
      url += 'venues/';
    }
    if (type === 2) {
      url += 'bands/';
    }
    url += genre[0];
    return http({
      method: 'GET',
      url: url
    });
  };
  result.update_users_genres = function(data) {
    var url;
    console.log(data);
    url = "/api/user/" + data.username;
    return http({
      method: 'PUT',
      url: url,
      data: data
    });
  };
  result.get_data_from_api = function() {
    var functions;
    functions = {};
    functions.get_all_user_data = function(username) {
      var deferred;
      deferred = Q.defer();
      result.get_all_user_data(username).then(function(data) {
        deferred.resolve(data.data);
      });
      return deferred.promise;
    };
    functions.get_all_users_by_genre = function(user_data) {
      var deferred;
      deferred = Q.defer();
      result.get_all_users_by_genre(user_data.profile, user_data.genres).then(function(data) {
        deferred.resolve(data.data);
      });
      return deferred.promise;
    };
    return functions;
  };
  return result;
};

Service.$inject = ['$http', '$q'];

angular.module('app').factory('userService', Service);
